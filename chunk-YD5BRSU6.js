import{a as G}from"./chunk-2LOGK6DC.js";import{a as z,b as N,c as Y,d as R}from"./chunk-4VQYDBGL.js";import{a as Q}from"./chunk-M3ZAVI66.js";import"./chunk-6XXA7HXI.js";import"./chunk-PGA7LY6D.js";import{d as V,e as j,x as D}from"./chunk-JLTB4Q6O.js";import{$b as k,Aa as u,Ab as p,Bb as w,Cb as c,Mb as r,Nb as s,Ob as g,Pb as P,Qb as S,Sb as b,Xb as f,Yb as l,bc as E,cb as O,cc as A,dc as F,ec as x,fc as m,gc as C,hb as a,hc as I,ib as v,nc as T,oa as y,oc as $,za as _}from"./chunk-ZQYR7OXX.js";var U=["subSection"],Z=()=>[1,2,3,4];function q(i,d){if(i&1&&(r(0,"h2",8),m(1),s()),i&2){let t=l().$implicit;a(),C(t.name)}}function L(i,d){if(i&1&&(r(0,"h5",20),m(1),s()),i&2){let t=l().$implicit;a(),C(t.name)}}function B(i,d){if(i&1){let t=b();r(0,"div",22),f("click",function(){_(t);let e=l().$implicit,o=l(3);return u(o.watchEpisode(e))}),r(1,"div",23),g(2,"img",24),s(),r(3,"p",25),m(4),s()()}if(i&2){let t=l().$implicit;a(2),k("alt",t.title),c("src",t.thumbnailUrl,O),a(2),I(" ",t.title," ")}}function H(i,d){i&1&&(P(0),p(1,B,5,3,"ng-template",21),S())}function J(i,d){i&1&&(r(0,"div",28)(1,"div",29),g(2,"div",30),r(3,"div",31),g(4,"div",32)(5,"div",33),s()()())}function K(i,d){i&1&&(r(0,"div",26),p(1,J,6,0,"div",27),s()),i&2&&(a(),c("ngForOf",$(1,Z)))}function W(i,d){i&1&&(r(0,"div",34),m(1," No episodes found. "),s())}function X(i,d){if(i&1){let t=b();r(0,"div",9,0),p(2,L,2,1,"h5",10),r(3,"div",11),f("scrolled",function(){let e=_(t).$implicit,o=l().$implicit,h=l();return u(h.onScroll(o.slug,e.slug))}),r(4,"owl-carousel-o",12,1),p(6,H,2,0,"ng-container",13),s(),r(7,"button",14),f("click",function(){_(t);let e=x(5);return u(e.prev())}),g(8,"i",15),s(),r(9,"button",16),f("click",function(){_(t);let e=x(5);return u(e.next())}),g(10,"i",17),s(),p(11,K,2,2,"div",18)(12,W,2,0,"div",19),s()()}if(i&2){let t=d.$implicit,n=l().$implicit,e=l();w("data-category",n.slug)("data-sub",t.slug),a(2),c("ngIf",e.visibleNamesMap[n.slug+"-"+t.slug]),a(),c("infiniteScrollDistance",2)("infiniteScrollThrottle",300),a(),c("options",e.customOptions),a(2),c("ngForOf",e.episodesMap[n.slug+"-"+t.slug]),a(5),c("ngIf",e.loadingMap[n.slug+"-"+t.slug]),a(),c("ngIf",e.notFoundMap[n.slug+"-"+t.slug])}}function ee(i,d){if(i&1&&(r(0,"div",5),p(1,q,2,1,"h2",6)(2,X,13,9,"div",7),s()),i&2){let t=d.$implicit,n=l();a(),c("ngIf",n.visibleNamesMap[t.slug+"-"+(t.subcategories[0]==null?null:t.subcategories[0].slug)]),a(),c("ngForOf",t.subcategories)}}var le=(()=>{class i{constructor(t,n,e){this.categoryService=t,this.episodeService=n,this.router=e,this.categoryGroups=[],this.episodesMap={},this.pageMap={},this.lastPageMap={},this.loadingMap={},this.notFoundMap={},this.visibleNamesMap={},this.customOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,margin:15,nav:!1,responsive:{0:{items:1},400:{items:2},740:{items:3},940:{items:4}}}}ngOnInit(){this.loadCategories()}ngAfterViewInit(){this.observer=new IntersectionObserver(t=>{t.forEach(n=>{if(n.isIntersecting){let e=n.target.getAttribute("data-category"),o=n.target.getAttribute("data-sub");e&&typeof o=="string"&&this.onSubcategoryVisible(e,o),this.observer.unobserve(n.target)}})},{threshold:.2}),this.subSections.forEach(t=>this.observer.observe(t.nativeElement))}loadCategories(){this.categoryService.getAllContent().subscribe({next:t=>{let n=t.data.content||[];this.categoryGroups=n.filter(e=>Array.isArray(e.subcategories)&&e.subcategories.length>0),this.categoryGroups.slice(0,2).forEach(e=>{e.subcategories.forEach(o=>{o?.slug&&o?.name&&this.loadEpisodes(e.slug,o.slug)})})},error:t=>console.error("Error fetching categories:",t)})}loadEpisodes(t,n){let e=`${t}-${n}`;this.loadingMap[e]||this.lastPageMap[e]||this.notFoundMap[e]||(this.loadingMap[e]=!0,this.pageMap[e]||(this.pageMap[e]=0),this.episodesMap[e]||(this.episodesMap[e]=[]),this.episodeService.getEpisodes(t,n,this.pageMap[e]).subscribe({next:o=>{let h=o.data?.content||[],M=o.data?.last||!1;h.length===0&&this.pageMap[e]===0?this.notFoundMap[e]=!0:(this.episodesMap[e]=[...this.episodesMap[e],...h],this.visibleNamesMap[e]=!0),this.lastPageMap[e]=M,M||(this.pageMap[e]+=1),this.loadingMap[e]=!1},error:o=>{console.error(`Error fetching episodes for ${n}:`,o),this.loadingMap[e]=!1,o.status===404&&(this.notFoundMap[e]=!0)}}))}onSubcategoryVisible(t,n){let e=`${t}-${n}`;this.episodesMap[e]?.length||this.loadEpisodes(t,n)}onScroll(t,n){let e=`${t}-${n}`;this.lastPageMap[e]||this.loadEpisodes(t,n)}watchEpisode(t){t?.slug&&this.router.navigate(["/episode",t.slug])}static{this.\u0275fac=function(n){return new(n||i)(v(R),v(Q),v(D))}}static{this.\u0275cmp=y({type:i,selectors:[["app-category"]],viewQuery:function(n,e){if(n&1&&E(U,5),n&2){let o;A(o=F())&&(e.subSections=o)}},standalone:!0,features:[T],decls:4,vars:1,consts:[["subSection",""],["carousel",""],[1,"container","my-4"],[1,"text-white-50","mb-4","text-center"],["class","mb-5",4,"ngFor","ngForOf"],[1,"mb-5"],["class","text-white mb-3  text-center text-uppercase",4,"ngIf"],["class","mb-4 position-relative",4,"ngFor","ngForOf"],[1,"text-white","mb-3","text-center","text-uppercase"],[1,"mb-4","position-relative"],["class","text-warning mb-3",4,"ngIf"],["infiniteScroll","",1,"carousel-wrapper","position-relative",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle"],[3,"options"],[4,"ngFor","ngForOf"],["aria-label","Previous",1,"carousel-btn","prev-btn",3,"click"],[1,"bi","bi-chevron-left"],["aria-label","Next",1,"carousel-btn","next-btn",3,"click"],[1,"bi","bi-chevron-right"],["class","loading-cards-container",4,"ngIf"],["class","text-center text-muted mt-3",4,"ngIf"],[1,"text-warning","mb-3"],["carouselSlide",""],[1,"video-thumb",3,"click"],[1,"thumb-container"],["loading","lazy",1,"thumb-img",3,"src","alt"],[1,"small","mt-2","text-white-50","text-truncate"],[1,"loading-cards-container"],["class","col-6 col-md-3",4,"ngFor","ngForOf"],[1,"col-6","col-md-3"],[1,"skeleton-card"],[1,"skeleton-thumbnail","shimmer"],[1,"skeleton-content","mt-2"],[1,"skeleton-line","short","shimmer"],[1,"skeleton-line","long","shimmer"],[1,"text-center","text-muted","mt-3"]],template:function(n,e){n&1&&(r(0,"div",2)(1,"h2",3),m(2,"Video Categories"),s(),p(3,ee,3,2,"div",4),s()),n&2&&(a(3),c("ngForOf",e.categoryGroups))},dependencies:[V,j,G,Y,N,z],styles:['body[_ngcontent-%COMP%]{--body-text-color: white}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;object-fit:cover}.card-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.2rem}.card-text[_ngcontent-%COMP%]{font-size:.9rem}.video-card[_ngcontent-%COMP%]{cursor:pointer;overflow:hidden}.video-card[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#0009;opacity:0;transition:opacity .3s ease-in-out}.video-card[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.video-card[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:700;border-radius:30px;padding:10px 20px}.video-thumb[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s}.video-thumb[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.carousel-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);z-index:10;background:#00000080;color:#fff;border:none;border-radius:50%;width:40px;height:40px;font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .3s}.carousel-btn[_ngcontent-%COMP%]:hover{background:#000000b3}.carousel-wrapper[_ngcontent-%COMP%]{overflow-y:auto;max-height:600px;position:relative}.carousel-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);z-index:10;background:#0006;color:#fff;border:none;font-size:1.8rem;border-radius:50%;width:45px;height:45px;display:flex;justify-content:center;align-items:center;transition:all .3s ease;cursor:pointer}.carousel-btn[_ngcontent-%COMP%]:hover{background:#ffffffe6;color:#000;transform:translateY(-50%) scale(1.1)}.prev-btn[_ngcontent-%COMP%]{left:3px}.next-btn[_ngcontent-%COMP%]{right:3px}.thumb-container[_ngcontent-%COMP%]{width:100%;height:180px;overflow:hidden;object-fit:cover;display:flex;justify-content:center;align-items:center;background-color:#222;border-radius:8px;transform:scale(1) translateZ(0);transition:transform 3s ease}.thumb-container[_ngcontent-%COMP%]:hover{transform:scale(.94) translateZ(0);border:1px solid rgba(255,255,255,.3);box-shadow:0 0 10px #f006;border-radius:10px}h3[ng-reflect-ng-if][_ngcontent-%COMP%], h5[ng-reflect-ng-if][_ngcontent-%COMP%]{opacity:0;transform:translateY(10px);transition:all .3s ease-in-out}h3.ng-trigger[_ngcontent-%COMP%], h5.ng-trigger[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]:not([ng-reflect-ng-if=false]), h5[_ngcontent-%COMP%]:not([ng-reflect-ng-if=false]){opacity:1;transform:translateY(0)}.thumb-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;object-position:center}.loading-cards-container[_ngcontent-%COMP%]{display:contents}.skeleton-card[_ngcontent-%COMP%]{width:100%;border-radius:10px;background-color:#181818;overflow:hidden}.skeleton-thumbnail[_ngcontent-%COMP%]{width:100%;height:150px;border-radius:10px;background-color:#2a2a2a}.skeleton-content[_ngcontent-%COMP%]{padding:8px 0}.skeleton-line[_ngcontent-%COMP%]{height:10px;border-radius:5px;margin-bottom:6px;background-color:#2a2a2a}.skeleton-line.short[_ngcontent-%COMP%]{width:60%}.skeleton-line.long[_ngcontent-%COMP%]{width:90%}.shimmer[_ngcontent-%COMP%]{position:relative;overflow:hidden}.shimmer[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-150%;width:50%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{to{left:150%}}']})}}return i})();export{le as All_categoryComponent};
