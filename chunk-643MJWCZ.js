import{a as A}from"./chunk-2LOGK6DC.js";import{a as D,b as V,c as Y,d as N}from"./chunk-4VQYDBGL.js";import{a as L}from"./chunk-M3ZAVI66.js";import{d as T,e as F,v as j,x as z}from"./chunk-JLTB4Q6O.js";import{$b as S,Aa as C,Ab as g,Cb as l,Mb as r,Nb as s,Ob as u,Pb as v,Qb as b,Sb as y,Xb as _,Yb as f,cb as k,ec as w,fc as O,hb as a,hc as P,ib as m,nc as E,oa as M,oc as I,za as h}from"./chunk-ZQYR7OXX.js";var K=()=>[1,2,3,4,5,6];function Z(t,c){t&1&&(r(0,"div",15),u(1,"div",16),r(2,"div",17),u(3,"div",18)(4,"div",19),s()())}function R(t,c){t&1&&(r(0,"div",13),g(1,Z,5,0,"div",14),s()),t&2&&(a(),l("ngForOf",I(1,K)))}function U(t,c){t&1&&(v(0),g(1,R,2,2,"ng-template",12),b())}function W(t,c){if(t&1){let e=y();r(0,"div",23)(1,"div",24)(2,"img",25),_("click",function(){let n=h(e).$implicit,i=f(5);return C(i.openEpisodePage(n))}),s(),r(3,"div",17)(4,"h5",26),O(5),s()()()()}if(t&2){let e=c.$implicit;a(2),S("alt",e.title),l("src",e.thumbnailUrl,k),a(3),P(" ",e.title," ")}}function X(t,c){if(t&1&&(r(0,"div",21),g(1,W,6,3,"div",22),s()),t&2){let e=f().$implicit;a(),l("ngForOf",e)}}function B(t,c){t&1&&(v(0),g(1,X,2,1,"ng-template",12),b())}function G(t,c){if(t&1&&(v(0),g(1,B,2,0,"ng-container",20),b()),t&2){let e=f().$implicit;a(),l("ngForOf",e.groups)}}function q(t,c){if(t&1){let e=y();r(0,"div",3)(1,"h2",4),O(2),s(),r(3,"div",5)(4,"owl-carousel-o",6,0),g(6,U,2,0,"ng-container",7)(7,G,2,1,"ng-container",7),s(),r(8,"button",8),_("click",function(){h(e);let n=w(5);return C(n.prev())}),u(9,"i",9),s(),r(10,"button",10),_("click",function(){h(e);let n=w(5);return C(n.next())}),u(11,"i",11),s()()()}if(t&2){let e=c.$implicit,o=f();a(2),P(" ",e.category," "),a(2),l("options",o.customOptions),a(2),l("ngIf",e.loading),a(),l("ngIf",!e.loading)}}var re=(()=>{class t{constructor(e,o,n,i){this.router=e,this.route=o,this.episodeService=n,this.categoryService=i,this.allCategories=[],this.groupedEpisodes=[],this.currentPage=0,this.pageSize=2,this.loading=!1,this.allLoaded=!1,this.customOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!0,navSpeed:700,margin:15,nav:!1,responsive:{0:{items:1},400:{items:2},740:{items:3},940:{items:4}}}}ngOnInit(){sessionStorage.getItem("X-API-KEY")?this.loadCategories():console.warn("X-API-KEY not found in sessionStorage. API calls skipped.")}loadCategories(){this.categoryService.getAllContent().subscribe({next:e=>{let o=e.data.content||[];o=o.filter(i=>i.name.toLowerCase()!=="originals");let n={};o.forEach(i=>{let p=i.name;n[p]||(n[p]=[]),i.subcategories?.length&&n[p].push(...i.subcategories)}),this.allCategories=Object.keys(n).map(i=>({name:i,subcategories:n[i]})),this.currentPage=0,this.groupedEpisodes=[],this.allLoaded=!1,this.loadMoreCategories()},error:e=>console.error("Error fetching categories:",e)})}loadMoreCategories(){let e=this.currentPage*this.pageSize,o=e+this.pageSize,n=this.allCategories.slice(e,o);if(!n.length){this.allLoaded=!0;return}n.forEach(i=>{if(!i.subcategories?.length)return;let p=i.subcategories.flatMap(d=>d.episodes||[]);p.length&&(this.groupedEpisodes.push({category:i.name,subCategoryName:"",groups:[],loading:!0}),setTimeout(()=>{let d=this.groupEpisodes(p,2),x=this.groupedEpisodes.findIndex($=>$.category===i.name);x>-1&&(this.groupedEpisodes[x].groups=d,this.groupedEpisodes[x].loading=!1)},500))}),this.currentPage++}groupEpisodes(e,o=2,n=1){let i=[],p=o*n;for(let d=0;d<e.length;d+=p)i.push(e.slice(d,d+p));return i}onScroll(){this.loading||this.allLoaded||(this.loading=!0,setTimeout(()=>{this.loadMoreCategories(),this.loading=!1},500))}openEpisodePage(e){this.router.navigate(["/episode",e.slug])}static{this.\u0275fac=function(o){return new(o||t)(m(z),m(j),m(L),m(N))}}static{this.\u0275cmp=M({type:t,selectors:[["app-podcast"]],standalone:!0,features:[E],decls:2,vars:4,consts:[["carousel",""],["infiniteScroll","",1,"categories-wrapper",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","scrollWindow"],["class","subcategory-section mx-5 position-relative",4,"ngFor","ngForOf"],[1,"subcategory-section","mx-5","position-relative"],[1,"text-white","fs-2","text-uppercase","text-center","smt-5","mb-4"],[1,"carousel-container","position-relative"],[3,"options"],[4,"ngIf"],["aria-label","Previous",1,"carousel-btn","prev-btn",3,"click"],[1,"bi","bi-chevron-left"],["aria-label","Next",1,"carousel-btn","next-btn",3,"click"],[1,"bi","bi-chevron-right"],["carouselSlide",""],[1,"loading-cards-container","d-flex","flex-wrap","gap-3"],["class","skeleton-card",4,"ngFor","ngForOf"],[1,"skeleton-card"],[1,"skeleton-thumbnail","shimmer"],[1,"skeleton-content","mt-2"],[1,"skeleton-line","short","shimmer"],[1,"skeleton-line","long","shimmer"],[4,"ngFor","ngForOf"],[1,"categories-wrapper"],["class","episode-card","style","flex: 1 0 calc(25% - 1rem);",4,"ngFor","ngForOf"],[1,"episode-card",2,"flex","1 0 calc(25% - 1rem)"],[1,"episode-box"],["loading","lazy",1,"episode-img","shadow-lg",3,"click","src","alt"],[1,"skeleton-line","text-white","mt-3","text-truncate"]],template:function(o,n){o&1&&(r(0,"div",1),_("scrolled",function(){return n.onScroll()}),g(1,q,12,4,"div",2),s()),o&2&&(l("infiniteScrollDistance",2)("infiniteScrollThrottle",100)("scrollWindow",!0),a(),l("ngForOf",n.groupedEpisodes))},dependencies:[Y,V,D,T,A,F],styles:['.owl-carousel .owl-nav{position:absolute;top:45%;left:0;width:100%;display:flex;justify-content:space-between;transform:translateY(-50%)}  .owl-carousel .owl-nav button{pointer-events:auto;color:#fff;border:none;border-radius:50%;font-size:20px;cursor:pointer;width:50px;height:50px}  .owl-carousel .owl-nav button:hover{background:#555;cursor:pointer}  .owl-carousel .owl-nav button span{font-size:32px;line-height:1}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;align-items:center;justify-content:center;opacity:0;clip-path:inset(0 0 100% 0);transition:opacity .3s ease,clip-path .5s ease}.watch-btn[_ngcontent-%COMP%]:hover{background:#b02a37}.episode-box[_ngcontent-%COMP%]:hover   .episode-img[_ngcontent-%COMP%]{transform:scale(1.05) translateZ(0)}.episode-box[_ngcontent-%COMP%]{border-radius:8px;transform:scale(1) translateZ(0);transition:transform 1s ease}.categories-wrapper[_ngcontent-%COMP%]{scroll-behavior:smooth;padding-bottom:50px}.carousel-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);z-index:10;background:#00000080;color:#fff;border:none;border-radius:50%;width:40px;height:40px;font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .3s}.carousel-btn[_ngcontent-%COMP%]:hover{background:#000000b3}.carousel-wrapper[_ngcontent-%COMP%]{overflow-y:auto;max-height:600px;position:relative}.prev-btn[_ngcontent-%COMP%]{left:3px}.next-btn[_ngcontent-%COMP%]{right:3px}.episode-box[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(.96) translateZ(0)}.episode-slide[_ngcontent-%COMP%]{display:flex;gap:10px;cursor:pointer}.episode-card[_ngcontent-%COMP%]{text-align:center}.episode-img[_ngcontent-%COMP%]{width:220px;height:150px;display:block;object-fit:cover;border-radius:6px;transition:transform .3s ease}.loading-cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;justify-content:center;padding:1rem}.skeleton-card[_ngcontent-%COMP%]{width:300px;border-radius:10px;overflow:hidden;background-color:#181818}.skeleton-thumbnail[_ngcontent-%COMP%]{width:100%;height:170px;border-radius:10px;background-color:#2a2a2a}.skeleton-content[_ngcontent-%COMP%]{padding:10px 0}.skeleton-line[_ngcontent-%COMP%]{height:20px;border-radius:5px;margin-bottom:8px;background-color:#2a2a2a}.skeleton-line.short[_ngcontent-%COMP%]{width:60%}.skeleton-line.long[_ngcontent-%COMP%]{width:90%}.shimmer[_ngcontent-%COMP%]{position:relative;overflow:hidden}.shimmer[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-150%;width:50%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{to{left:150%}}@media (max-width: 768px){.skeleton-card[_ngcontent-%COMP%]{width:100%;max-width:100%}}.carousel-container[_ngcontent-%COMP%]{position:relative}.carousel-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);z-index:10;background:#0006;color:#fff;border:none;font-size:1.8rem;border-radius:50%;width:45px;height:45px;display:flex;justify-content:center;align-items:center;transition:all .3s ease;cursor:pointer}.carousel-btn[_ngcontent-%COMP%]:hover{background:#ffffffe6;color:#000;transform:translateY(-50%) scale(1.1)}.prev-btn[_ngcontent-%COMP%]{left:-20px}.next-btn[_ngcontent-%COMP%]{right:-20px}.carousel-container[_ngcontent-%COMP%]:hover   .carousel-btn[_ngcontent-%COMP%]{opacity:1}.carousel-btn[_ngcontent-%COMP%]{opacity:.7}']})}}return t})();export{re as a};
